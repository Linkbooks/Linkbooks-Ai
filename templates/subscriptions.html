<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subscription Form</title>
  <!-- Link to your CSS file -->
  <link rel="stylesheet" href="/static/styles.css"> <!-- Ensure path is correct -->
</head>

<body>
  <form id="subscriptions-form" method="POST" class="container form-container">
    <!-- Hidden input fields to pass user data -->
    <input type="hidden" id="email" value="{{ email }}">
    <input type="hidden" id="chat-session-id" value="{{ chat_session_id }}">

    <h2>Select Your Subscription Plan</h2>

    <div id="subscription-options" class="subscription-options">
      <!-- Monthly Plan Box -->
      <div class="plan-box" data-plan="monthly">
        <h3>Monthly Plan</h3>
        <p class="price">&pound;10/month</p>
        <div class="offers-section">
          <p><strong>Offers Included:</strong></p>
          <div class="offer-options">
            <label class="offer-label">
              <input type="radio" name="monthly-offer" value="monthly_3mo_discount" required />
              &pound;5/month for 3 months (&pound;15 upfront for the first 3 months)
            </label>
            <label class="offer-label">
              <input type="radio" name="monthly-offer" value="monthly_no_offer" required />
              No offer: &pound;10/month, cancel anytime
            </label>
          </div>
        </div>
        <div class="plan-details" id="monthly_3mo_discount-details">
          <p><strong>Monthly Plan Terms:</strong> You will pay &pound;15 upfront for the first 3 months. After that,
            your subscription renews at &pound;10/month unless canceled. Minimum commitment of 3 months.</p>
          <p><strong>Cancellation Policy:</strong> Cancellations apply after the 3-month period for this offer.</p>
          <a href="#">Read Terms and Conditions</a>
        </div>
        <div class="plan-details" id="monthly_no_offer-details">
          <p><strong>No Offer Terms:</strong> Standard monthly plan at &pound;10/month, cancel anytime.</p>
          <a href="#">Read Terms and Conditions</a>
        </div>
      </div>

      <!-- Annual Plan Box -->
      <div class="plan-box" data-plan="annual">
        <h3>Annual Plan</h3>
        <p class="price">&pound;5/month (billed &pound;60/year)</p>
        <div class="offers-section">
          <p><strong>Offers Included:</strong></p>
          <div class="offer-options">
            <label class="offer-label">
              <input type="radio" name="annual-offer" value="annual_free_week" required />
              Free Week: Try for 7 days, then pay &pound;60/year
            </label>
            <label class="offer-label">
              <input type="radio" name="annual-offer" value="annual_discount_no_free_week" required />
              Further Discount: &pound;55/year (Save an extra &pound;5 if you pay upfront)
            </label>
          </div>
        </div>
        <div class="plan-details" id="annual_free_week-details">
          <p><strong>Free Week Offer Terms:</strong> Your subscription includes a 7-day free trial. After the trial, you
            will be billed &pound;60 for the year. You can cancel during the free week to avoid charges.</p>
          <a href="#">Read Terms and Conditions</a>
        </div>
        <div class="plan-details" id="annual_discount_no_free_week-details">
          <p><strong>Further Discount Terms:</strong> Pay upfront &pound;55/year (save an extra &pound;5).</p>
          <a href="#">Read Terms and Conditions</a>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" id="proceed-to-checkout" class="button">Proceed to Checkout</button>
  </form>

  <!-- JavaScript -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("subscriptions-form");

      // Function to handle showing and hiding plan details
      function handlePlanSelection(event) {
        const selectedInput = event.target;

        if (selectedInput.type === "radio") {
          // Determine if it's a Monthly or Annual plan selection
          const planBox = selectedInput.closest(".plan-box");

          // Hide all details inside the selected plan-box
          planBox.querySelectorAll(".plan-details").forEach(details => {
            details.style.display = "none";
          });

          // Find and show the details of the selected offer
          const selectedDetailsId = selectedInput.value + "-details";
          const selectedDetails = document.getElementById(selectedDetailsId);

          if (selectedDetails) {
            selectedDetails.style.display = "block"; // Show the selected details
          }
        }
      }

      // Attach event listener for changes in radio button selection
      form.addEventListener("change", handlePlanSelection);

      // Initially hide all plan details
      document.querySelectorAll(".plan-details").forEach(details => {
        details.style.display = "none";
      });
    });
  </script>

</body>

</html>